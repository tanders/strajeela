<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>strajeela.pitch documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Strajeela</span> <span class="project-version">0.0.1-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>strajeela</span></div></div></li><li class="depth-2 branch"><a href="strajeela.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch current"><a href="strajeela.pitch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pitch</span></div></a></li><li class="depth-2"><a href="strajeela.score.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>score</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="strajeela.pitch.html#var-*tuning-table*"><div class="inner"><span>*tuning-table*</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-freq-.3Ekeynum"><div class="inner"><span>freq-&gt;keynum</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-HEWM-accidentals"><div class="inner"><span>HEWM-accidentals</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-is-et-unit.3F"><div class="inner"><span>is-et-unit?</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-ji-pc-symbol-.3Eratio"><div class="inner"><span>ji-pc-symbol-&gt;ratio</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-ji-pitch-symbol-.3Eratio"><div class="inner"><span>ji-pitch-symbol-&gt;ratio</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-keynum-.3Efreq"><div class="inner"><span>keynum-&gt;freq</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-keynum-.3Epc"><div class="inner"><span>keynum-&gt;pc</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-odd-limit"><div class="inner"><span>odd-limit</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-pitch-.3Emidi"><div class="inner"><span>pitch-&gt;midi</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-prime-exponent-vector-.3Eratio"><div class="inner"><span>prime-exponent-vector-&gt;ratio</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-prime-limit"><div class="inner"><span>prime-limit</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-ratio-.3Ekeynum"><div class="inner"><span>ratio-&gt;keynum</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-ratio-.3Estandard-octave"><div class="inner"><span>ratio-&gt;standard-octave</span></div></a></li><li class="depth-1"><a href="strajeela.pitch.html#var-units-pitches-per-octave"><div class="inner"><span>units-pitches-per-octave</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">strajeela.pitch</h1><div class="doc"><div class="markdown"><p>Utilities related to pitch processing including microtonal pitches. No constraints here.</p></div></div><div class="public anchor" id="var-*tuning-table*"><h3>*tuning-table*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>This global tuning table is used when translating pitches into their corresponding midi floats for output. </p>
<p>The format of a tuning table declaration is somewhat similar to the Scala scale file format (cf. <a href="http://www.huygens-fokker.org/scala/scl_format.html">http://www.huygens-fokker.org/scala/scl_format.html</a> ). A tuning table is a vector of pitch specs, which are either floats (measured in cent) or ratios (including integers). The first degree is implicit (always 1/1 or 0.0). The highest pitch (i.e. the last value in a vector) is the period interval. </p>
<p>Here is an example that defines 1/4-comma Meantone:</p>
<pre><code>[76.04900 193.15686 310.26471 5/4 503.42157 579.47057 696.57843 25/16 889.73529 1006.84314 1082.89214 2/1]
</code></pre>
<p>An unset tuning table (nil) corresponds to the equal tempered scale.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-freq-.3Ekeynum"><h3>freq-&gt;keynum</h3><div class="usage"><code>(freq-&gt;keynum freq)</code><code>(freq-&gt;keynum freq keys-per-octave)</code></div><div class="doc"><div class="markdown"><p>Transforms freq into the corresponding keynum in an equally tempered scale with keys-per-octave keys per octave. The function is ‘tuned’ such that (freq-&gt;keynum 440 12) returns 69.0. </p>
<p>NB: The term keynum here is not limited to a MIDI keynumber but denotes a keynumber in any equidistant tuning. For instance, if keys-per-octave=1200 then keynum denotes cent values.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-HEWM-accidentals"><h3>HEWM-accidentals</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>A map that maps accidentals of HEWM notation to their respective ratios (see <a href="http://tonalsoft.com/enc/h/hewm.aspx">http://tonalsoft.com/enc/h/hewm.aspx</a> ). Both, the accidentals of Joe Monzo and of Manuel op de Coul (in software Scala) are supported.</p>
<p><strong>Monzo</strong></p>
<pre><code>lower raise  2,3,5,7,11-monzo       ratio      ~cents
  b    #    [-11  7,  0  0  0&gt;    2187:2048  113.6850061
  v    ^    [ -5  1,  0  0  1&gt;      33:32     53.2729432
  &lt;    &gt;    [  6 -2,  0 -1  0&gt;      64:63     27.2640918
  -    +    [ -4  4, -1  0  0&gt;      81:80     21.5062896
</code></pre>
<p><strong>de Coul</strong></p>
<pre><code>lower raise  2,3,5,7,11-monzo      ratio      ~cents
  b    #    [-11  7  0  0  0]    2187:2048  113.6850061
  v    ^    [ -5  1  0  0  1]      33:32     53.2729432
  L    7    [  6 -2  0 -1  0]      64:63     27.2640918
  \    /    [ -4  4 -1  0  0]      81:80     21.5062896
</code></pre>
<p>Remember that a backslash must be escaped (and it must be part of a string).</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-is-et-unit.3F"><h3>is-et-unit?</h3><div class="usage"><code>(is-et-unit? pitch-unit)</code></div><div class="doc"><div class="markdown"><p>Returns true if pitch-unit is a symbol/keyword/string which matches the pattern <code>&lt;Digit&gt;+et</code> such as <code>:31et</code> or <code>'72et</code>.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-ji-pc-symbol-.3Eratio"><h3>ji-pc-symbol-&gt;ratio</h3><div class="usage"><code>(ji-pc-symbol-&gt;ratio pc-symbol)</code><code>(ji-pc-symbol-&gt;ratio pc-symbol accidentals-map)</code></div><div class="doc"><div class="markdown"><p>Translates a symbolic pitch class (symbol, keyword or string) into the corresponding ratio in standard octave [1/1, 2/1]. A pitch class consists of a nominal and an optional accidental. The nominals A, B, C and so on are Pythagorean fifths, with C representing 1/1. </p>
<p>Besides the standard accidentals b, # and so on, also microtonal accidentals are supported. By default HEWM notation is supported (see <a href="http://tonalsoft.com/enc/h/hewm.aspx">http://tonalsoft.com/enc/h/hewm.aspx</a> ), but different accidental can be defined and their meaning overwritten with a map mapping accidentals to ratios. </p>
<p>Examples (with default accidental mapping) :C =&gt; 1 :C# =&gt; 2187/2048</p>
<p>BUG: Combination of accidentals such as :Bb70 not yet supported</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-ji-pitch-symbol-.3Eratio"><h3>ji-pitch-symbol-&gt;ratio</h3><div class="usage"><code>(ji-pitch-symbol-&gt;ratio pitch-symbol)</code><code>(ji-pitch-symbol-&gt;ratio pitch-symbol accidentals-map)</code></div><div class="doc"><div class="markdown"><p>Translates a symbolic pitch (symbol, keyword or string) into the corresponding ratio. A pitch consists of a nominal, an optional accidental, and an octave (an integer). See [ji-pc-symbol-&gt;ratio] for further details on nominals and accidentals.</p>
<p>Examples (with default accidental mapping) :C0 =&gt; 1 :C4 =&gt; 16 :C#4 =&gt; 2187/2048</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-keynum-.3Efreq"><h3>keynum-&gt;freq</h3><div class="usage"><code>(keynum-&gt;freq keynum)</code><code>(keynum-&gt;freq keynum keys-per-octave)</code></div><div class="doc"><div class="markdown"><p>Transforms a keynum into the corresponding frequency in an equally tempered scale with keys-per-octave keys per octave. The function is ‘tuned’ such that (keynum-&gt;freq 69 12) returns 440.0 Hz. </p>
<p>NB: The term keynum here is not limited to a MIDI keynumber, but denotes a keynumber in any equidistant tuning. For instance, if keys-per-octave=1200 then keynum denotes cent values.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-keynum-.3Epc"><h3>keynum-&gt;pc</h3><div class="usage"><code>(keynum-&gt;pc keynum)</code><code>(keynum-&gt;pc keynum keys-per-octave)</code></div><div class="doc"><div class="markdown"><p>Transforms a keynumber (integer or float) in an equally tempered scale with keys-per-octave into its corresponding pitch class.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-odd-limit"><h3>odd-limit</h3><div class="usage"><code>(odd-limit freq-ratio)</code></div><div class="doc"><div class="markdown"><p>Returns the odd limit of freq-ratio. See <a href="http://en.wikipedia.org/wiki/Odd_limit#Odd_limit">http://en.wikipedia.org/wiki/Odd_limit#Odd_limit</a></p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-pitch-.3Emidi"><h3>pitch-&gt;midi</h3><div class="usage"><code>(pitch-&gt;midi pitch pitch-unit)</code><code>(pitch-&gt;midi pitch pitch-unit tuning-table)</code></div><div class="doc"><div class="markdown"><p>Transforms pitch measured in pitch-unit (a symbol, keyword or string) into the corresponding ‘Midi float’, i.e. a Midi number where positions after the decimal point express microtonal pitch deviations (e.g., 60.5 is middle C raised by a quarter tone). Possible pitch units are midi (i.e., 12-tone equal temperament), midicent/midic, frequency/freq/hz, and arbitrary equal temperaments (:22et, :31et, :72et and so forth).</p>
<p>The transformation takes into account an optional tuning table, which defaults to <em>tuning-table</em> (which is nil by default).</p>
<p>BUG: Currently, tuning tables are only supported for the pitch-unit midi.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-prime-exponent-vector-.3Eratio"><h3>prime-exponent-vector-&gt;ratio</h3><div class="usage"><code>(prime-exponent-vector-&gt;ratio prime-exponents)</code></div><div class="doc"><div class="markdown"><p>Expects a prime exponent vector and returns the corresponding ratio. This is useful, for example, for expressing frequency ratios broken down into individual prime-number based intervals; see, e.g., <a href="http://tonalsoft.com/enc/m/monzo.aspx">http://tonalsoft.com/enc/m/monzo.aspx</a> .</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-prime-limit"><h3>prime-limit</h3><div class="usage"><code>(prime-limit freq-ratio)</code></div><div class="doc"><div class="markdown"><p>Returns the prime limit of freq-ratio. See <a href="http://en.wikipedia.org/wiki/Odd_limit#Prime_limit">http://en.wikipedia.org/wiki/Odd_limit#Prime_limit</a></p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-ratio-.3Ekeynum"><h3>ratio-&gt;keynum</h3><div class="usage"><code>(ratio-&gt;keynum ratio)</code><code>(ratio-&gt;keynum ratio keys-per-octave)</code></div><div class="doc"><div class="markdown"><p>Transforms ratio (either a float or a ratio) into the corresponding keynumber (or keynumber interval) in an equally tempered scale with keys-per-octave keys per octave. Returns a float, so that deviations of the ratio from the temperament are expressed – simply round the result if you need an approximation to the nearest exact keynumber. </p>
<p>Examples: (ratio-&gt;keynum 1 12) =&gt; 0.0 (ratio-&gt;keynum 3/2 12) =&gt; 7.01955</p>
<p>Note that a keynum here is not limited to a MIDI keynumber, but denotes a keynumber in any equidistant tuning. For instance, if keys-per-octave is 1200, keynum Keynum denotes cent values.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-ratio-.3Estandard-octave"><h3>ratio-&gt;standard-octave</h3><div class="usage"><code>(ratio-&gt;standard-octave freq-ratio)</code></div><div class="doc"><div class="markdown"><p>Expects a frequency ratio (ratio, float or integer) and transposes it by octaves into the interval [1/2, 2/2], i.e. effectively into a ratio pitch class.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div><div class="public anchor" id="var-units-pitches-per-octave"><h3>units-pitches-per-octave</h3><div class="usage"><code>(units-pitches-per-octave et-pitch-unit)</code></div><div class="doc"><div class="markdown"><p>Returns the pitches per octave expressed by an ET pitch unit, e.g., for :31et it returns 31.</p></div></div><div class="src-link"><a href="https://github.com/tanders/strajeela/tree/master">view source</a></div></div></div></body></html>